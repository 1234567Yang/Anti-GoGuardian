<html>

<head></head>

<body onbeforeunload="return Refuse()"><button onclick="load()">
        Unblock
    </button>
  <br>
    <input id="input1" placeholder="The link" style="width:100%;" value="https://www.bilibili.com/">
  <br>
    <input id="InputTime" placeholder="How long did the website usually reply(ms)" style="width:100%;" value="5000">
  <p id="p1">
    hit
  </p>
    <iframe id="i1" src="" style="”left:0;top:0;height:100%;width:100%;”">

    </iframe>
      <script language="javascript">
        var times;
        function load()
          {
           var time; document.getElementById("i1").src=document.getElementById("input1").value;
            time = document.getElementById("InputTime").value
            setTimeout("console.log (1)", time );
            setTimeout("check()", time );

          }
      
      function check(){
        console.log (2)
    if(document.getElementById("i1").src == document.getElementById("input1").value)
    {
document.getElementById("p1").innerHTML = "successed";
        return "";
        }else {
          
  //document.getElementById("i1").src=document.getElementById("input1").value
document.getElementById("p1").innerHTML = "working on, if you press ←, it will be better.";
  times = times + 1;
          
  if(times > 5){
    console.log("times bigger than 5, refresh.");
    times = 0;
    refresh();
    return "";
  }
  setTimeout("load()", 1 );
      return "";
     }
    }
        function refresh(){
          var ifm = document.createElement("iframe");
          ifm = document.getElementById("i1");
         load()
        }
      function Refuse() {
        console.log("refuse to close..");
        return "refuse to close...";
}
    </script>

</body>

</html>
